[{"id":"e7f5e33446f1dbf1","type":"tab","label":"Display","disabled":false,"info":"","env":[]},{"id":"ab29ab1bb1b818a1","type":"rpi-gpio in","z":"e7f5e33446f1dbf1","name":"Key 1","pin":"29","intype":"up","debounce":"25","read":true,"x":110,"y":180,"wires":[["74cf2f5e41f47983"]]},{"id":"22d70a7e036770ea","type":"rpi-gpio in","z":"e7f5e33446f1dbf1","name":"Key 2","pin":"31","intype":"up","debounce":"25","read":true,"x":110,"y":380,"wires":[["a44ea031b0f25b43"]]},{"id":"cae54c295721b829","type":"rpi-gpio in","z":"e7f5e33446f1dbf1","name":"Key 4","pin":"35","intype":"up","debounce":"25","read":true,"x":110,"y":880,"wires":[["540f5d4563afeffb"]]},{"id":"74cf2f5e41f47983","type":"switch","z":"e7f5e33446f1dbf1","name":"gedrückt?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":180,"wires":[["d4505d36995f813e","4e25849cea59eb19"]]},{"id":"a44ea031b0f25b43","type":"switch","z":"e7f5e33446f1dbf1","name":"gedrückt?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":380,"wires":[["c749dbdba1938aa8"]]},{"id":"540f5d4563afeffb","type":"switch","z":"e7f5e33446f1dbf1","name":"gedrückt?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":880,"wires":[[]]},{"id":"a02e88756b887e3e","type":"link in","z":"e7f5e33446f1dbf1","name":"Kontakt entfernt","links":["9bcd6016f6709495","1529f05e1e16762e"],"x":440,"y":120,"wires":[["6853277d9ede6386"]],"l":true},{"id":"23bfa454fb1f2ba0","type":"link out","z":"e7f5e33446f1dbf1","name":"Reset Alles","mode":"link","links":["48ca291ac9d0db16"],"x":650,"y":400,"wires":[],"l":true},{"id":"f36bb58c410f8ca9","type":"comment","z":"e7f5e33446f1dbf1","name":"Code für Buttons","info":"","x":120,"y":60,"wires":[]},{"id":"c749dbdba1938aa8","type":"change","z":"e7f5e33446f1dbf1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":380,"wires":[["23bfa454fb1f2ba0","1888e68594b5af93"]]},{"id":"34ec3b6a49f27bec","type":"link out","z":"e7f5e33446f1dbf1","name":"Zustand laden","mode":"link","links":["d59c703ca6eda68c","298bd3122c8c2e50","b37e57c1fcbb4c47","5106f9e96bfecd07"],"x":1100,"y":180,"wires":[],"l":true},{"id":"a279ecd23bc904ac","type":"change","z":"e7f5e33446f1dbf1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"init","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":180,"wires":[["34ec3b6a49f27bec"]]},{"id":"8e217e083d7c3155","type":"link out","z":"e7f5e33446f1dbf1","name":"Skripte stoppen","mode":"link","links":["b0f1db1b12e1b1ec","808b98f1b3f29078"],"x":660,"y":220,"wires":[],"l":true},{"id":"d4505d36995f813e","type":"change","z":"e7f5e33446f1dbf1","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"stop","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":220,"wires":[["8e217e083d7c3155"]]},{"id":"4e25849cea59eb19","type":"delay","z":"e7f5e33446f1dbf1","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":460,"y":180,"wires":[["d0934694b7cf3382","6853277d9ede6386"]]},{"id":"d0934694b7cf3382","type":"delay","z":"e7f5e33446f1dbf1","name":"warten bis Display bereit ist","pauseType":"delay","timeout":"8","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":700,"y":180,"wires":[["a279ecd23bc904ac"]]},{"id":"1888e68594b5af93","type":"delay","z":"e7f5e33446f1dbf1","name":"warten bis Display bereit ist","pauseType":"delay","timeout":"9","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":700,"y":360,"wires":[["a52184b0a0998d8c"]]},{"id":"5cc757392febafdd","type":"inject","z":"e7f5e33446f1dbf1","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":260,"y":220,"wires":[["d4505d36995f813e"]]},{"id":"a52184b0a0998d8c","type":"link out","z":"e7f5e33446f1dbf1","name":"Überprüfen ob alle Geräte erreichbar sind","mode":"link","links":["57f57fbdbf6a5e5a"],"x":1020,"y":360,"wires":[],"l":true},{"id":"ed28ee3b3bf6e219","type":"comment","z":"e7f5e33446f1dbf1","name":"Bildschirm neuladen","info":"","x":150,"y":120,"wires":[]},{"id":"8b7b3a82a520c7bb","type":"comment","z":"e7f5e33446f1dbf1","name":"Rätsel 1 neustarten","info":"","x":150,"y":320,"wires":[]},{"id":"e98c6031e42621ed","type":"comment","z":"e7f5e33446f1dbf1","name":"QR code anzeigen","info":"","x":150,"y":500,"wires":[]},{"id":"6853277d9ede6386","type":"pythonshell in","z":"e7f5e33446f1dbf1","name":"Display leeren","pyfile":"/home/pi/escape-game/e-Paper/src/reset.py","virtualenv":"","continuous":false,"stdInData":false,"x":660,"y":120,"wires":[[]]},{"id":"a572f205ba6cc7ba","type":"rpi-gpio in","z":"e7f5e33446f1dbf1","name":"Key 3","pin":"33","intype":"up","debounce":"25","read":true,"x":110,"y":560,"wires":[["62acff28bb057934"]]},{"id":"62acff28bb057934","type":"switch","z":"e7f5e33446f1dbf1","name":"gedrückt?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":560,"wires":[["72f311e2b7297fec"]]},{"id":"72f311e2b7297fec","type":"exec","z":"e7f5e33446f1dbf1","command":"hostname -I","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":450,"y":560,"wires":[["a78097bf39b586b1"],[],[]]},{"id":"a78097bf39b586b1","type":"function","z":"e7f5e33446f1dbf1","name":"IP extrahieren","func":"//msg.payload=msg.payload.slice(0,13)\nmsg.payload=\"http://\"+(msg.payload.split(\" \"))[0]+\":8082\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":540,"wires":[["f03212fe9deedf1c"]]},{"id":"f03212fe9deedf1c","type":"Barcode Generator","z":"e7f5e33446f1dbf1","name":"qrcode generieren","data":"payload","dataType":"msg","barcode":"qrcode","barcodeType":"barcode","options":"","optionsType":"ui","sendProperty":"payload","props":[{"p":"rotate","v":"N","vt":"str"},{"p":"includetext","v":"false","vt":"bool"}],"x":850,"y":540,"wires":[["4ff593c87bf67329"]]},{"id":"4ff593c87bf67329","type":"jimp-image","z":"e7f5e33446f1dbf1","name":"hintergrund","data":"payload","dataType":"msg","ret":"img","parameter1":"4294967295","parameter1Type":"num","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":1,"jimpFunction":"background","selectedJimpFunction":{"name":"background","fn":"background","description":"set the default new pixel colour (e.g. 0xFFFFFFFF or 0x00000000) useful for by some operations e.g. contain or rotate","parameters":[{"name":"hex","type":"num","required":true,"hint":"hexadecimal rgba value (must be entered as a decimal e.g. 0xFFFFFFFF = 4294967295)","defaultValue":"4294967295"}]},"x":1030,"y":540,"wires":[["61156a5ad07ceffe"]]},{"id":"61156a5ad07ceffe","type":"jimp-image","z":"e7f5e33446f1dbf1","name":"schärfen","data":"payload","dataType":"msg","ret":"img","parameter1":"1.0","parameter1Type":"num","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":0,"jimpFunction":"convolute_strongsharpen","selectedJimpFunction":{"name":"strong sharpen*","fn":"convolute_strongsharpen","description":"sharpen image (*uses convolute([[-1, -1, -1], [-1, 9, -1], [-1, -1, -1]])","parameters":[]},"x":1200,"y":540,"wires":[["e0f8d8ec4cd80a6e"]]},{"id":"e0f8d8ec4cd80a6e","type":"jimp-image","z":"e7f5e33446f1dbf1","name":"skalieren","data":"payload","dataType":"msg","ret":"img","parameter1":"135","parameter1Type":"num","parameter2":"135","parameter2Type":"num","parameter3":"Top Left","parameter3Type":"alignMode","parameter4":"","parameter4Type":"none","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":4,"jimpFunction":"contain","selectedJimpFunction":{"name":"contain","fn":"contain","description":"scale the image to the given width and height, some parts of the image may be letter boxed","parameters":[{"name":"w","type":"num","required":true,"hint":"the width to resize the image to"},{"name":"h","type":"num","required":true,"hint":"the height to resize the image to"},{"name":"alignBits","type":"alignMode","required":false,"hint":"A bitmask for horizontal and vertical alignment. Jimp.HORIZONTAL_ALIGN_LEFT | Jimp.HORIZONTAL_ALIGN_CENTER | Jimp.HORIZONTAL_ALIGN_RIGHT | Jimp.VERTICAL_ALIGN_TOP | Jimp.VERTICAL_ALIGN_MIDDLE | Jimp.VERTICAL_ALIGN_BOTTOM;"},{"name":"mode","type":"resizeMode","required":false,"hint":"A scaling method (e.g. Jimp.RESIZE_BEZIER)"}]},"x":1340,"y":540,"wires":[["5a0fb72d438e7272"]]},{"id":"5a0fb72d438e7272","type":"jimp-image","z":"e7f5e33446f1dbf1","name":"speichern","data":"payload","dataType":"msg","ret":"img","parameter1":"/home/pi/escape-game/e-Paper/pic/qrcode.png","parameter1Type":"str","parameter2":"","parameter2Type":"msg","parameter3":"","parameter3Type":"msg","parameter4":"","parameter4Type":"msg","parameter5":"","parameter5Type":"msg","parameter6":"","parameter6Type":"msg","parameter7":"","parameter7Type":"msg","parameter8":"","parameter8Type":"msg","sendProperty":"payload","sendPropertyType":"msg","parameterCount":1,"jimpFunction":"write","selectedJimpFunction":{"name":"write","fn":"write","description":"Write to file. NOTE: You can specify an alternative file extension type to change the type. Currently support types are jpg, png, bmp.","parameters":[{"name":"filename","type":"str","required":true,"hint":"Name of the file","defaultType":"str"}]},"x":1480,"y":540,"wires":[["03a9e997eada22d4"]]},{"id":"03a9e997eada22d4","type":"exec","z":"e7f5e33446f1dbf1","command":"/bin/python3 /home/pi/escape-game/e-Paper/src/qrcode.py","addpay":"","append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"qrcode.py","x":1620,"y":540,"wires":[[],[],[]]}]